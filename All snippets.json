[
  {
    "key": "165e40d57cfcf546562c980bc45cafe83c16a023",
    "createAt": 1597287489932,
    "updateAt": 1597287524126,
    "copy": 0,
    "tags": [
      "wx",
      "js"
    ],
    "name": "eventChannel  页面间通信",
    "description": "",
    "files": [
      {
        "key": "be2dbbbe6215c49139823e4258447c289b0a2e13",
        "name": "发送页",
        "value": "wx.navigateTo({\n                url: '/pages/shopping/order/item/index',\n                events: {\n                    // 为指定事件添加一个监听器，获取被打开页面传送到当前页面的数据\n                    acceptDataFromOpenedPage: function (data) {\n                        console.log(data)\n                    },\n                    someEvent: function (data) {\n                        console.log(data)\n                    }\n                },\n                success: function (res) {\n                    // 通过eventChannel向被打开页面传送数据\n                    // 数组格式pro，统一格式\n                    // res.eventChannel.emit('orderItems', {data: 'test'})\n                    res.eventChannel.emit('acceptDataFromOpenerPage', {data: 'test'})\n                }\n            })"
      },
      {
        "key": "85aeeeb2807b5ca78c07e3ae1d0bb27f40e973f8",
        "name": "接受页",
        "value": "  onLoad: function (options) {\n            const eventChannel = this.getOpenerEventChannel()\n            // 监听acceptDataFromOpenerPage事件，获取上一页面通过eventChannel传送到当前页面的数据\n            eventChannel.on('orderItems', function (data) {\n                data.orderItems.forEach(item => {\n                    //todo get data from api\n                    console.log(item.productCode)\n                })\n            })\n        },"
      }
    ]
  }
]
